/*! qui.circularMenu v0.1.0 // jlreymendez Â© 01-21-2013 */
/*! Licensed MIT: https://github.com/jlreymendez/qui/blob/master/License.txt */
(function(b,a){if((!b)||(!b.widget)||(!a)){return false}b.widget("qui.rateIt",{options:{baseClass:"",range:5,rate:0,stars:[],starsOptions:{markup:"<span class='{{htmlClass}}'>{{text}}</span>",},hoverable:true},_create:function(){this.options.rate=Math.min(Math.max(0,this.options.rate),Math.min(this.options.rate,this.options.range));this.baseClass=this.options.baseClass?this.options.baseClass:"qui-rateIt";this.element.addClass(this.baseClass);this._starsCreation();this._on(this.$stars,{click:this._evStarClicked});if(this.options.hoverable){this._on({mouseleave:this._evStarMouseLeave});this._on(this.$stars,{mouseenter:this._evStarMouseEnter,})}},_setHoverableEvents:function(){},_setOption:function(c,d){switch(c){case"rate":this._setStateToStars(d);this._trigger("rated",null,{rate:d});break}this._super(c,d)},_setStateToStars:function(d){for(var c=0;c<this.options.range;c++){if(c+1>d){this.$stars.eq(c).removeClass("qui-state-on")}else{this.$stars.eq(c).addClass("qui-state-on")}}},_starsCreation:function(){var d,g,c,f;c=a.compile(this.options.starsOptions.markup);f=this.baseClass+"star";this.$stars=b();for(var e=0;e<this.options.range;e++){d=b(c.render(this.options.stars[e]));f=this.baseClass+"-star";f+=((e+1)<=this.options.rate)?" qui-state-on":"";d.addClass(f);d.data("qui-rateIt-starValue",e+1);this.$stars=this.$stars.add(d)}this.element.append(this.$stars)},_evStarClicked:function(d){var c=b(d.target);this.options.rate=c.data("qui-rateIt-starValue");this._setStateToStars(this.options.rate);this._trigger("rated",d,{rate:this.options.rate})},_evStarMouseEnter:function(c){this._setStateToStars(b(c.target).data("qui-rateIt-starValue"))},_evStarMouseLeave:function(c){this._setStateToStars(this.options.rate)}});b.widget.bridge("rateIt",b.qui.rateIt)})(jQuery,Hogan);